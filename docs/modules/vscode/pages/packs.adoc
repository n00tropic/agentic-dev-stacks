= VS Code Packs

Packs are the source of truth for profiles, extensions, settings, and MCP manifests.

[mermaid]
....
graph TB
    subgraph "vscode/packs/"
        subgraph "Pack Structure"
            P[pack-name/]
            P --> PRO[profiles/]
            P --> EXT[extensions/]
            P --> SET[settings/]
            P --> MCP[mcp/]
            
            PRO --> PROMD[PROFILE.slug.md]
            EXT --> EXTTXT[extensions.slug.txt]
            SET --> SETJSON[settings.slug.json]
            MCP --> MCPJSON[servers.slug.json]
        end
    end
    
    subgraph "Export Process"
        PROMD --> W[Workspace]
        EXTTXT --> W
        SETJSON --> W
        MCPJSON --> W
        
        W --> B[Bundle]
        W --> I[Install Scripts]
    end
    
    style P fill:#e1f5ff
    style W fill:#fff3e0
    style B fill:#f3e5f5
....

.Pack Structure and Export Process
Diagram showing how pack files are organized and exported to workspaces and bundles.

== Layout

- `vscode/packs/<pack>/profiles/PROFILE.<slug>.md`
- `vscode/packs/<pack>/extensions/extensions.<slug>.txt`
- `vscode/packs/<pack>/settings/settings.<slug>.json`
- `vscode/packs/<pack>/mcp/servers.<slug>.json`

Edit these files to change a profile. Keep `CONTROL.md` in sync when adding/removing profiles (20-profile budget).

== Export to workspaces

[source,bash]
----
cd vscode
python scripts/export-packs.py <slug> [<slug> ...]
----

Outputs: `vscode/exports/workspaces/<slug>/` (git-ignored) containing `.vscode/extensions.list`, `.vscode/settings.json`, `<slug>.code-workspace`.

== Apply exports on a machine

[source,bash]
----
cd vscode
cat exports/workspaces/<slug>/.vscode/extensions.list | xargs -L1 code --install-extension --profile "<Profile Name>"
code exports/workspaces/<slug>/<slug>.code-workspace --profile "<Profile Name>"
----

Fast path: use `scripts/macos/install-profiles.sh`, `scripts/linux/install-profiles.sh`, or `scripts/windows/Install-Profiles.ps1` to loop through slugs.

== Validation

- After extension changes: `./scripts/helpers/validate-extensions.sh` (or PowerShell variant).
- After MCP manifest changes: optionally run `python scripts/validate_extensions.py` and/or `python scripts/merge-mcp-fragments.py ...` to stage MCP TOML locally (never commit generated files).

Related: xref:bundles.adoc[] for bundle builds and dist exports.
