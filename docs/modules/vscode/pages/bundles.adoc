= Bundles & Dist Exports

Bundles are reproducible ZIPs containing workspace, settings, extensions list, MCP manifests, custom agents, and install scripts.

[mermaid]
....
flowchart LR
    subgraph Source
        P[Packs]
        A[Custom Agents]
        S[Scripts]
    end
    
    subgraph Build
        B[build-bundles.py]
    end
    
    subgraph Output
        W[Workspace Files]
        Z[Bundle ZIP]
        I[Install Scripts]
    end
    
    subgraph Deployment
        D1[Manual Install]
        D2[CI/CD]
        D3[Gist Distribution]
    end
    
    P --> B
    A --> B
    S --> B
    
    B --> W
    B --> Z
    B --> I
    
    W --> D1
    Z --> D1
    Z --> D2
    I --> D1
    
    Z --> D3
    D3 --> D1
    
    style B fill:#e1f5ff
    style Z fill:#fff3e0
    style D3 fill:#f3e5f5
....

.Bundle Build and Distribution Flow
Diagram showing how packs are built into bundles and distributed to users.

== Build bundles

[source,bash]
----
cd vscode
python scripts/build-bundles.py            # all slugs
python scripts/build-bundles.py <slug> ... # specific slugs
----

Outputs:

- `vscode/exports/bundles/<slug>/`
- `vscode/exports/bundles/<slug>-bundle.zip`

== Validate bundles

[source,bash]
----
bash vscode/scripts/validate-all-bundles.sh
----

Checks structure, JSON/TOML, and extension install via an isolated VS Code user data dir.

== Install scripts (inside each bundle)

- `scripts/install-macos.sh` / `install-linux.sh`
- `scripts/Install-Windows.ps1`

Scripts create/open the profile, install extensions, and open the workspace using `code --profile`.

== Dist profiles and gists

- Authoritative dist `.code-profile` exports live in `vscode/profiles-dist/*.code-profile` (regenerated via VS Code **Export Profile…**, never hand-edited).
- `PROFILE_DIST.md` maps slug → profile name → dist path → gist URL (or `<TO_FILL>` placeholders).
- Optional GitHub Actions workflow `export-profile-to-gist.yml` publishes to a secret gist using `secrets.GIST_TOKEN` (scope: gist).
- Manual SSH path: create a secret gist, then run `./scripts/helpers/export-gist-ssh.sh <slug> <gist_id>` after exporting the profile.
